<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="884px" preserveAspectRatio="none" style="width:671px;height:884px;" version="1.1" viewBox="0 0 671 884" width="671px" zoomAndPan="magnify"><defs><style type="text/css"><![CDATA[*.s_181818_e7e7e7 {stroke:#181818;}*.f_000000_ffffff {fill:#000000;}*.f_ffffff_000000 {fill:#ffffff;}*.s_000000_ffffff {stroke:#000000;}*.f_eeeeee_111111 {fill:#eeeeee;}*.s_eeeeee_111111 {stroke:#eeeeee;}*.f_feffdd_333333 {fill:#feffdd;}*.f_181818_e7e7e7 {fill:#181818;}@media (prefers-color-scheme:dark) {*.s_181818_e7e7e7 {stroke:#e7e7e7;}*.f_000000_ffffff {fill:#ffffff;}*.f_ffffff_000000 {fill:#000000;}*.s_000000_ffffff {stroke:#ffffff;}*.f_eeeeee_111111 {fill:#111111;}*.s_eeeeee_111111 {stroke:#111111;}*.f_feffdd_333333 {fill:#333333;}*.f_181818_e7e7e7 {fill:#e7e7e7;}}]]></style></defs><g><rect class="s_181818_e7e7e7" fill="#ADD8E6" height="872.3203" style="stroke-width:0.5;" width="101" x="467.5" y="6"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95" x="470.5" y="18.0669">Microservice</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="214.9297" style="stroke-width:1.0;" width="10" x="513" y="281.3594"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="156.5313" style="stroke-width:1.0;" width="10" x="513" y="601.3594"/><rect class="s_000000_ffffff" fill="#90EE90" height="583.9297" style="stroke-width:1.5;" width="644" x="10" y="243.0938"/><rect fill="#FFC0CB" height="261.6016" style="stroke:none;stroke-width:1.0;" width="644" x="10" y="565.4219"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="74" x2="74" y1="56.4297" y2="844.0234"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="211" x2="211" y1="56.4297" y2="844.0234"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="358" x2="358" y1="56.4297" y2="844.0234"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="517.5" x2="517.5" y1="56.4297" y2="844.0234"/><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="109" x="20" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="27" y="45.1279">Web Browser</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="109" x="20" y="843.0234"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="27" y="863.0186">Web Browser</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="145" x="139" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="146" y="45.1279">Gateway (WS/SSE)</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="145" x="139" y="843.0234"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="146" y="863.0186">Gateway (WS/SSE)</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="128" x="294" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="301" y="45.1279">Message Broker</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="128" x="294" y="843.0234"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="301" y="863.0186">Message Broker</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="483.5" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="490.5" y="45.1279">Handler</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="483.5" y="843.0234"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="490.5" y="863.0186">Handler</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="214.9297" style="stroke-width:1.0;" width="10" x="513" y="281.3594"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="156.5313" style="stroke-width:1.0;" width="10" x="513" y="601.3594"/><rect class="f_eeeeee_111111 s_eeeeee_111111" height="3" style="stroke-width:1.0;" width="664" x="0" y="86.9961"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="664" y1="86.9961" y2="86.9961"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="664" y1="89.9961" y2="89.9961"/><rect class="f_eeeeee_111111 s_000000_ffffff" height="23.1328" style="stroke-width:2.0;" width="45" x="309.5" y="76.4297"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="315.5" y="92.4966">Init</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="209.5" x2="199.5" y1="130.6953" y2="126.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="209.5" x2="199.5" y1="130.6953" y2="134.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="210.5" y1="130.6953" y2="130.6953"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="81.5" y="125.6294">Send message</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M79,143.6953 L79,168.6953 L251,168.6953 L251,153.6953 L241,143.6953 L79,143.6953 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M241,143.6953 L241,153.6953 L251,153.6953 L241,143.6953 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="85" y="160.7622">ex: 'get company by id'</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="356" x2="346" y1="194.9609" y2="190.9609"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="356" x2="346" y1="194.9609" y2="198.9609"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="357" y1="194.9609" y2="194.9609"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="218.5" y="189.895">Enqueue message</text><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="42,207.9609,549,207.9609,559,218.9609,549,230.9609,42,230.9609,32,218.9609,42,207.9609" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="265.25" y="224.0278">"pending"</text><path class="s_000000_ffffff" d="M10,243.0938 L76,243.0938 L76,250.2266 L66,260.2266 L10,260.2266 L10,243.0938 " fill="#FFD700" style="stroke-width:1.5;"/><rect class="s_000000_ffffff" fill="none" height="583.9297" style="stroke-width:1.5;" width="644" x="10" y="243.0938"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="256.1606">alt</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="91" y="255.3042">[Fillfill]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="501,277.3594,511,281.3594,501,285.3594,505,281.3594" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="358" x2="507" y1="281.3594" y2="281.3594"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="365" y="276.2935">Consume message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="523" x2="565" y1="295.3594" y2="295.3594"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="565" x2="565" y1="295.3594" y2="308.3594"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="524" x2="565" y1="308.3594" y2="308.3594"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,304.3594,524,308.3594,534,312.3594,530,308.3594" style="stroke-width:1.0;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M443,321.3594 L443,346.3594 L593,346.3594 L593,331.3594 L583,321.3594 L443,321.3594 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M583,321.3594 L583,331.3594 L593,331.3594 L583,321.3594 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="449" y="338.4263">Bussiness logic here</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="652,368.625,662,372.625,652,376.625,656,372.625" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="523" x2="658" y1="372.625" y2="372.625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="530" y="367.5591">request</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M528,385.625 L528,440.625 L644,440.625 L644,395.625 L634,385.625 L528,385.625 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M634,385.625 L634,395.625 L644,395.625 L634,385.625 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="534" y="402.6919">synchronous</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="534" y="417.8247">call to external</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="534" y="432.9575">system</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,463.1563,524,467.1563,534,471.1563,530,467.1563" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="528" x2="663" y1="467.1563" y2="467.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="540" y="462.0903">response</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="369,492.2891,359,496.2891,369,500.2891,365,496.2891" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="363" x2="517" y1="496.2891" y2="496.2891"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="375" y="491.2231">Enqueue message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="510.2891" y2="506.2891"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="510.2891" y2="514.2891"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="357" y1="510.2891" y2="510.2891"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="524.2891" y2="520.2891"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="524.2891" y2="528.2891"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="210.5" y1="524.2891" y2="524.2891"/><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="42,537.2891,549,537.2891,559,548.2891,549,560.2891,42,560.2891,32,548.2891,42,537.2891" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="267.75" y="553.356">"fulfilled"</text><line class="s_000000_ffffff" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="654" y1="566.4219" y2="566.4219"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="15" y="576.6323">[Reject]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="501,597.3594,511,601.3594,501,605.3594,505,601.3594" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="358" x2="507" y1="601.3594" y2="601.3594"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="365" y="596.2935">Consume message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="523" x2="565" y1="615.3594" y2="615.3594"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="565" x2="565" y1="615.3594" y2="628.3594"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="524" x2="565" y1="628.3594" y2="628.3594"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,624.3594,524,628.3594,534,632.3594,530,628.3594" style="stroke-width:1.0;"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="652,653.4922,662,657.4922,652,661.4922,656,657.4922" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="523" x2="658" y1="657.4922" y2="657.4922"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="530" y="652.4263">request</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,682.625,524,686.625,534,690.625,530,686.625" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="528" x2="663" y1="686.625" y2="686.625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="540" y="681.5591">error</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="523" x2="565" y1="715.7578" y2="715.7578"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="565" x2="565" y1="715.7578" y2="728.7578"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="524" x2="565" y1="728.7578" y2="728.7578"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,724.7578,524,728.7578,534,732.7578,530,728.7578" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="530" y="710.6919">catch</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="369,753.8906,359,757.8906,369,761.8906,365,757.8906" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="363" x2="517" y1="757.8906" y2="757.8906"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="375" y="752.8247">Enqueue message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="771.8906" y2="767.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="771.8906" y2="775.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="357" y1="771.8906" y2="771.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="785.8906" y2="781.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="785.8906" y2="789.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="210.5" y1="785.8906" y2="785.8906"/><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="42,798.8906,549,798.8906,559,809.8906,549,821.8906,42,821.8906,32,809.8906,42,798.8906" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="264.75" y="814.9575">"rejected"</text><!--MD5=[a476eac00f63ab2eef56e15226b7549e]
@startuml
participant "Web Browser" as WebBrowser
participant "Gateway (WS/SSE)" as Gateway
participant "Message Broker" as MessageBus
box "Microservice" #LightBlue
participant "Handler" as Handler
end box

== Init ==

WebBrowser  ->>  Gateway: Send message
note right WebBrowser: ex: 'get company by id'
Gateway ->> MessageBus: Enqueue message

hnote across: "pending"

alt#Gold #LightGreen Fillfill

'== Fullfill ==

MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
note over Handler: Bussiness logic here
Handler ->] : request
note right Handler: synchronous\ncall to external\nsystem 
Handler <- -] : response
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "fulfilled"

else #Pink Reject

'== Reject ==

MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
Handler ->] : request
Handler <- -] : error
Handler -> Handler: catch 
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "rejected"

end
@enduml

@startuml
participant "Web Browser" as WebBrowser
participant "Gateway (WS/SSE)" as Gateway
participant "Message Broker" as MessageBus
box "Microservice" #LightBlue
participant "Handler" as Handler
end box

== Init ==

WebBrowser  ->>  Gateway: Send message
note right WebBrowser: ex: 'get company by id'
Gateway ->> MessageBus: Enqueue message

hnote across: "pending"

alt#Gold #LightGreen Fillfill


MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
note over Handler: Bussiness logic here
Handler ->] : request
note right Handler: synchronous\ncall to external\nsystem 
Handler <- -] : response
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "fulfilled"

else #Pink Reject


MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
Handler ->] : request
Handler <- -] : error
Handler -> Handler: catch 
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "rejected"

end
@enduml

PlantUML version 1.2022.2beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>