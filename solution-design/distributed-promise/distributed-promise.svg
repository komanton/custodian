<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="927px" preserveAspectRatio="none" style="width:671px;height:927px;" version="1.1" viewBox="0 0 671 927" width="671px" zoomAndPan="magnify"><defs><style type="text/css"><![CDATA[*.s_181818_e7e7e7 {stroke:#181818;}*.f_000000_ffffff {fill:#000000;}*.f_ffffff_000000 {fill:#ffffff;}*.s_000000_ffffff {stroke:#000000;}*.f_eeeeee_111111 {fill:#eeeeee;}*.s_eeeeee_111111 {stroke:#eeeeee;}*.f_feffdd_333333 {fill:#feffdd;}*.f_181818_e7e7e7 {fill:#181818;}@media (prefers-color-scheme:dark) {*.s_181818_e7e7e7 {stroke:#e7e7e7;}*.f_000000_ffffff {fill:#ffffff;}*.f_ffffff_000000 {fill:#000000;}*.s_000000_ffffff {stroke:#ffffff;}*.f_eeeeee_111111 {fill:#111111;}*.s_eeeeee_111111 {stroke:#111111;}*.f_feffdd_333333 {fill:#333333;}*.f_181818_e7e7e7 {fill:#e7e7e7;}}]]></style></defs><g><rect class="s_181818_e7e7e7" fill="#ADD8E6" height="915.4531" style="stroke-width:0.5;" width="101" x="467.5" y="6"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95" x="470.5" y="18.0669">Microservice</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="214.9297" style="stroke-width:1.0;" width="10" x="513" y="324.4922"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="156.5313" style="stroke-width:1.0;" width="10" x="513" y="644.4922"/><rect class="s_000000_ffffff" fill="#90EE90" height="583.9297" style="stroke-width:1.5;" width="644" x="10" y="286.2266"/><rect fill="#FFC0CB" height="261.6016" style="stroke:none;stroke-width:1.0;" width="644" x="10" y="608.5547"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="74" x2="74" y1="56.4297" y2="887.1563"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="211" x2="211" y1="56.4297" y2="887.1563"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="358" x2="358" y1="56.4297" y2="887.1563"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="517.5" x2="517.5" y1="56.4297" y2="887.1563"/><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="109" x="20" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="27" y="45.1279">Web Browser</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="109" x="20" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="27" y="906.1514">Web Browser</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="145" x="139" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="146" y="45.1279">Gateway (WS/SSE)</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="145" x="139" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="146" y="906.1514">Gateway (WS/SSE)</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="128" x="294" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="301" y="45.1279">Message Broker</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="128" x="294" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="301" y="906.1514">Message Broker</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="483.5" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="490.5" y="45.1279">Handler</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="483.5" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="490.5" y="906.1514">Handler</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="214.9297" style="stroke-width:1.0;" width="10" x="513" y="324.4922"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="156.5313" style="stroke-width:1.0;" width="10" x="513" y="644.4922"/><rect class="f_eeeeee_111111 s_eeeeee_111111" height="3" style="stroke-width:1.0;" width="664" x="0" y="86.9961"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="664" y1="86.9961" y2="86.9961"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="664" y1="89.9961" y2="89.9961"/><rect class="f_eeeeee_111111 s_000000_ffffff" height="23.1328" style="stroke-width:2.0;" width="45" x="309.5" y="76.4297"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="315.5" y="92.4966">Init</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="209.5" x2="199.5" y1="130.6953" y2="126.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="209.5" x2="199.5" y1="130.6953" y2="134.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="210.5" y1="130.6953" y2="130.6953"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="81.5" y="125.6294">Send message</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M79,143.6953 L79,168.6953 L251,168.6953 L251,153.6953 L241,143.6953 L79,143.6953 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M241,143.6953 L241,153.6953 L251,153.6953 L241,143.6953 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="85" y="160.7622">ex: 'get company by id'</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="356" x2="346" y1="194.9609" y2="190.9609"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="356" x2="346" y1="194.9609" y2="198.9609"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="357" y1="194.9609" y2="194.9609"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="218.5" y="189.895">Enqueue message</text><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="42,207.9609,549,207.9609,559,218.9609,549,230.9609,42,230.9609,32,218.9609,42,207.9609" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="265.25" y="224.0278">"pending"</text><rect class="f_eeeeee_111111 s_eeeeee_111111" height="3" style="stroke-width:1.0;" width="664" x="0" y="256.6602"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="664" y1="256.6602" y2="256.6602"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="664" y1="259.6602" y2="259.6602"/><rect class="f_eeeeee_111111 s_000000_ffffff" height="23.1328" style="stroke-width:2.0;" width="75" x="294.5" y="246.0938"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="300.5" y="262.1606">Settled</text><path class="s_000000_ffffff" d="M10,286.2266 L76,286.2266 L76,293.3594 L66,303.3594 L10,303.3594 L10,286.2266 " fill="#FFD700" style="stroke-width:1.5;"/><rect class="s_000000_ffffff" fill="none" height="583.9297" style="stroke-width:1.5;" width="644" x="10" y="286.2266"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="299.2935">alt</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="91" y="298.437">[Fillfill]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="501,320.4922,511,324.4922,501,328.4922,505,324.4922" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="358" x2="507" y1="324.4922" y2="324.4922"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="365" y="319.4263">Consume message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="523" x2="565" y1="338.4922" y2="338.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="565" x2="565" y1="338.4922" y2="351.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="524" x2="565" y1="351.4922" y2="351.4922"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,347.4922,524,351.4922,534,355.4922,530,351.4922" style="stroke-width:1.0;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M443,364.4922 L443,389.4922 L593,389.4922 L593,374.4922 L583,364.4922 L443,364.4922 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M583,364.4922 L583,374.4922 L593,374.4922 L583,364.4922 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="449" y="381.5591">Bussiness logic here</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="652,411.7578,662,415.7578,652,419.7578,656,415.7578" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="523" x2="658" y1="415.7578" y2="415.7578"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="530" y="410.6919">request</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M528,428.7578 L528,483.7578 L644,483.7578 L644,438.7578 L634,428.7578 L528,428.7578 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M634,428.7578 L634,438.7578 L644,438.7578 L634,428.7578 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="534" y="445.8247">synchronous</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="534" y="460.9575">call to external</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="534" y="476.0903">system</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,506.2891,524,510.2891,534,514.2891,530,510.2891" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="528" x2="663" y1="510.2891" y2="510.2891"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="540" y="505.2231">response</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="369,535.4219,359,539.4219,369,543.4219,365,539.4219" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="363" x2="517" y1="539.4219" y2="539.4219"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="375" y="534.356">Enqueue message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="553.4219" y2="549.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="553.4219" y2="557.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="357" y1="553.4219" y2="553.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="567.4219" y2="563.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="567.4219" y2="571.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="210.5" y1="567.4219" y2="567.4219"/><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="42,580.4219,549,580.4219,559,591.4219,549,603.4219,42,603.4219,32,591.4219,42,580.4219" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="267.75" y="596.4888">"fulfilled"</text><line class="s_000000_ffffff" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="654" y1="609.5547" y2="609.5547"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="15" y="619.7651">[Reject]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="501,640.4922,511,644.4922,501,648.4922,505,644.4922" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="358" x2="507" y1="644.4922" y2="644.4922"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="365" y="639.4263">Consume message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="523" x2="565" y1="658.4922" y2="658.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="565" x2="565" y1="658.4922" y2="671.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="524" x2="565" y1="671.4922" y2="671.4922"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,667.4922,524,671.4922,534,675.4922,530,671.4922" style="stroke-width:1.0;"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="652,696.625,662,700.625,652,704.625,656,700.625" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="523" x2="658" y1="700.625" y2="700.625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="530" y="695.5591">request</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,725.7578,524,729.7578,534,733.7578,530,729.7578" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="528" x2="663" y1="729.7578" y2="729.7578"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="540" y="724.6919">error</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="523" x2="565" y1="758.8906" y2="758.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="565" x2="565" y1="758.8906" y2="771.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="524" x2="565" y1="771.8906" y2="771.8906"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="534,767.8906,524,771.8906,534,775.8906,530,771.8906" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="530" y="753.8247">catch</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="369,797.0234,359,801.0234,369,805.0234,365,801.0234" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="363" x2="517" y1="801.0234" y2="801.0234"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="375" y="795.9575">Enqueue message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="815.0234" y2="811.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="221.5" y1="815.0234" y2="819.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="211.5" x2="357" y1="815.0234" y2="815.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="829.0234" y2="825.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="84.5" y1="829.0234" y2="833.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="74.5" x2="210.5" y1="829.0234" y2="829.0234"/><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="42,842.0234,549,842.0234,559,853.0234,549,865.0234,42,865.0234,32,853.0234,42,842.0234" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="264.75" y="858.0903">"rejected"</text><!--MD5=[c98ba805d9512ea6a582da9dcdf9c6e7]
@startuml
participant "Web Browser" as WebBrowser
participant "Gateway (WS/SSE)" as Gateway
participant "Message Broker" as MessageBus
box "Microservice" #LightBlue
participant "Handler" as Handler
end box

== Init ==

WebBrowser  ->>  Gateway: Send message
note right WebBrowser: ex: 'get company by id'
Gateway ->> MessageBus: Enqueue message

hnote across: "pending"

== Settled ==

alt#Gold #LightGreen Fillfill

'== Fullfill ==

MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
note over Handler: Bussiness logic here
Handler ->] : request
note right Handler: synchronous\ncall to external\nsystem 
Handler <- -] : response
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "fulfilled"

else #Pink Reject

'== Reject ==

MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
Handler ->] : request
Handler <- -] : error
Handler -> Handler: catch 
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "rejected"

end
@enduml

@startuml
participant "Web Browser" as WebBrowser
participant "Gateway (WS/SSE)" as Gateway
participant "Message Broker" as MessageBus
box "Microservice" #LightBlue
participant "Handler" as Handler
end box

== Init ==

WebBrowser  ->>  Gateway: Send message
note right WebBrowser: ex: 'get company by id'
Gateway ->> MessageBus: Enqueue message

hnote across: "pending"

== Settled ==

alt#Gold #LightGreen Fillfill


MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
note over Handler: Bussiness logic here
Handler ->] : request
note right Handler: synchronous\ncall to external\nsystem 
Handler <- -] : response
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "fulfilled"

else #Pink Reject


MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
Handler ->] : request
Handler <- -] : error
Handler -> Handler: catch 
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
WebBrowser <<- Gateway

hnote across: "rejected"

end
@enduml

PlantUML version 1.2022.2beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>