<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="943px" preserveAspectRatio="none" style="width:623px;height:943px;" version="1.1" viewBox="0 0 623 943" width="623px" zoomAndPan="magnify"><defs><style type="text/css"><![CDATA[*.s_181818_e7e7e7 {stroke:#181818;}*.f_000000_ffffff {fill:#000000;}*.f_ffffff_000000 {fill:#ffffff;}*.s_000000_ffffff {stroke:#000000;}*.f_eeeeee_111111 {fill:#eeeeee;}*.s_eeeeee_111111 {stroke:#eeeeee;}*.f_feffdd_333333 {fill:#feffdd;}*.f_181818_e7e7e7 {fill:#181818;}@media (prefers-color-scheme:dark) {*.s_181818_e7e7e7 {stroke:#e7e7e7;}*.f_000000_ffffff {fill:#ffffff;}*.f_ffffff_000000 {fill:#000000;}*.s_000000_ffffff {stroke:#ffffff;}*.f_eeeeee_111111 {fill:#111111;}*.s_eeeeee_111111 {stroke:#111111;}*.f_feffdd_333333 {fill:#333333;}*.f_181818_e7e7e7 {fill:#e7e7e7;}}]]></style></defs><g><rect class="s_181818_e7e7e7" fill="#ADD8E6" height="931.75" style="stroke-width:0.5;" width="101" x="420" y="6"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95" x="423" y="18.0669">Microservice</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="214.9297" style="stroke-width:1.0;" width="10" x="465.5" y="324.4922"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="156.5313" style="stroke-width:1.0;" width="10" x="465.5" y="644.4922"/><rect class="s_000000_ffffff" fill="#90EE90" height="583.9297" style="stroke-width:1.5;" width="597" x="9" y="286.2266"/><rect fill="#FFC0CB" height="261.6016" style="stroke:none;stroke-width:1.0;" width="597" x="9" y="608.5547"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="56.4297" y2="887.1563"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="167.5" x2="167.5" y1="56.4297" y2="887.1563"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="310.5" x2="310.5" y1="56.4297" y2="887.1563"/><line class="s_181818_e7e7e7" style="stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="470" x2="470" y1="56.4297" y2="887.1563"/><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="57" x="20" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="27" y="45.1279">Client</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="57" x="20" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="27" y="906.1514">Client</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="96" x="119.5" y="8.8359"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="126.5" y="28.8311">Observable</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="136.5" y="45.1279">Gateway</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="96" x="119.5" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="126.5" y="906.1514">Observable</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="136.5" y="922.4482">Gateway</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="128" x="246.5" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="253.5" y="45.1279">Message Broker</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="128" x="246.5" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="253.5" y="906.1514">Message Broker</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="436" y="25.1328"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="443" y="45.1279">Handler</text><rect class="s_181818_e7e7e7" fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke-width:0.5;" width="69" x="436" y="886.1563"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="443" y="906.1514">Handler</text><rect class="f_ffffff_000000 s_181818_e7e7e7" height="214.9297" style="stroke-width:1.0;" width="10" x="465.5" y="324.4922"/><rect class="f_ffffff_000000 s_181818_e7e7e7" height="156.5313" style="stroke-width:1.0;" width="10" x="465.5" y="644.4922"/><rect class="f_eeeeee_111111 s_eeeeee_111111" height="3" style="stroke-width:1.0;" width="616" x="0" y="86.9961"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="616" y1="86.9961" y2="86.9961"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="616" y1="89.9961" y2="89.9961"/><rect class="f_eeeeee_111111 s_000000_ffffff" height="23.1328" style="stroke-width:2.0;" width="45" x="285.5" y="76.4297"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="291.5" y="92.4966">Init</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="165.5" x2="155.5" y1="130.6953" y2="126.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="165.5" x2="155.5" y1="130.6953" y2="134.6953"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="48.5" x2="166.5" y1="130.6953" y2="130.6953"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="55.5" y="125.6294">Send message</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M53,143.6953 L53,168.6953 L225,168.6953 L225,153.6953 L215,143.6953 L53,143.6953 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M215,143.6953 L215,153.6953 L225,153.6953 L215,143.6953 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="59" y="160.7622">ex: 'get company by id'</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="308.5" x2="298.5" y1="194.9609" y2="190.9609"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="308.5" x2="298.5" y1="194.9609" y2="198.9609"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="167.5" x2="309.5" y1="194.9609" y2="194.9609"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="174.5" y="189.895">Enqueue message</text><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="29,207.9609,489,207.9609,499,218.9609,489,230.9609,29,230.9609,19,218.9609,29,207.9609" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="228.5" y="224.0278">"pending"</text><rect class="f_eeeeee_111111 s_eeeeee_111111" height="3" style="stroke-width:1.0;" width="616" x="0" y="256.6602"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="616" y1="256.6602" y2="256.6602"/><line class="s_000000_ffffff" style="stroke-width:1.0;" x1="0" x2="616" y1="259.6602" y2="259.6602"/><rect class="f_eeeeee_111111 s_000000_ffffff" height="23.1328" style="stroke-width:2.0;" width="75" x="270.5" y="246.0938"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="56" x="276.5" y="262.1606">Settled</text><path class="s_000000_ffffff" d="M9,286.2266 L75,286.2266 L75,293.3594 L65,303.3594 L9,303.3594 L9,286.2266 " fill="#FFD700" style="stroke-width:1.5;"/><rect class="s_000000_ffffff" fill="none" height="583.9297" style="stroke-width:1.5;" width="597" x="9" y="286.2266"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="24" y="299.2935">alt</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="48" x="90" y="298.437">[Fillfill]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="453.5,320.4922,463.5,324.4922,453.5,328.4922,457.5,324.4922" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="310.5" x2="459.5" y1="324.4922" y2="324.4922"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="317.5" y="319.4263">Consume message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="475.5" x2="517.5" y1="338.4922" y2="338.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="517.5" x2="517.5" y1="338.4922" y2="351.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="476.5" x2="517.5" y1="351.4922" y2="351.4922"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="486.5,347.4922,476.5,351.4922,486.5,355.4922,482.5,351.4922" style="stroke-width:1.0;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M395,364.4922 L395,389.4922 L545,389.4922 L545,374.4922 L535,364.4922 L395,364.4922 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M535,364.4922 L535,374.4922 L545,374.4922 L535,364.4922 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="401" y="381.5591">Bussiness logic here</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="604,411.7578,614,415.7578,604,419.7578,608,415.7578" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="475.5" x2="610" y1="415.7578" y2="415.7578"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="482.5" y="410.6919">request</text><path class="f_feffdd_333333 s_181818_e7e7e7" d="M480,428.7578 L480,483.7578 L596,483.7578 L596,438.7578 L586,428.7578 L480,428.7578 " style="stroke-width:0.5;"/><path class="f_feffdd_333333 s_181818_e7e7e7" d="M586,428.7578 L586,438.7578 L596,438.7578 L586,428.7578 " style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="486" y="445.8247">synchronous</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="486" y="460.9575">call to external</text><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="486" y="476.0903">system</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="486.5,506.2891,476.5,510.2891,486.5,514.2891,482.5,510.2891" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="480.5" x2="615" y1="510.2891" y2="510.2891"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="492.5" y="505.2231">response</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="321.5,535.4219,311.5,539.4219,321.5,543.4219,317.5,539.4219" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315.5" x2="469.5" y1="539.4219" y2="539.4219"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="327.5" y="534.356">Enqueue message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="167.5" x2="177.5" y1="553.4219" y2="549.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="167.5" x2="177.5" y1="553.4219" y2="557.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="167.5" x2="309.5" y1="553.4219" y2="553.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="48.5" x2="58.5" y1="567.4219" y2="563.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="48.5" x2="58.5" y1="567.4219" y2="571.4219"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="48.5" x2="166.5" y1="567.4219" y2="567.4219"/><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="29,580.4219,489,580.4219,499,591.4219,489,603.4219,29,603.4219,19,591.4219,29,580.4219" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="231" y="596.4888">"fulfilled"</text><line class="s_000000_ffffff" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="9" x2="606" y1="609.5547" y2="609.5547"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52" x="14" y="619.7651">[Reject]</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="453.5,640.4922,463.5,644.4922,453.5,648.4922,457.5,644.4922" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="310.5" x2="459.5" y1="644.4922" y2="644.4922"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="317.5" y="639.4263">Consume message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="475.5" x2="517.5" y1="658.4922" y2="658.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="517.5" x2="517.5" y1="658.4922" y2="671.4922"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="476.5" x2="517.5" y1="671.4922" y2="671.4922"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="486.5,667.4922,476.5,671.4922,486.5,675.4922,482.5,671.4922" style="stroke-width:1.0;"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="604,696.625,614,700.625,604,704.625,608,700.625" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="475.5" x2="610" y1="700.625" y2="700.625"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="482.5" y="695.5591">request</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="486.5,725.7578,476.5,729.7578,486.5,733.7578,482.5,729.7578" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="480.5" x2="615" y1="729.7578" y2="729.7578"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="492.5" y="724.6919">error</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="475.5" x2="517.5" y1="758.8906" y2="758.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="517.5" x2="517.5" y1="758.8906" y2="771.8906"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="476.5" x2="517.5" y1="771.8906" y2="771.8906"/><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="486.5,767.8906,476.5,771.8906,486.5,775.8906,482.5,771.8906" style="stroke-width:1.0;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="482.5" y="753.8247">catch</text><polygon class="f_181818_e7e7e7 s_181818_e7e7e7" points="321.5,797.0234,311.5,801.0234,321.5,805.0234,317.5,801.0234" style="stroke-width:1.0;"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="315.5" x2="469.5" y1="801.0234" y2="801.0234"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="327.5" y="795.9575">Enqueue message</text><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="167.5" x2="177.5" y1="815.0234" y2="811.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="167.5" x2="177.5" y1="815.0234" y2="819.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="167.5" x2="309.5" y1="815.0234" y2="815.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="48.5" x2="58.5" y1="829.0234" y2="825.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="48.5" x2="58.5" y1="829.0234" y2="833.0234"/><line class="s_181818_e7e7e7" style="stroke-width:1.0;" x1="48.5" x2="166.5" y1="829.0234" y2="829.0234"/><polygon class="f_feffdd_333333 s_181818_e7e7e7" points="29,842.0234,489,842.0234,499,853.0234,489,865.0234,29,865.0234,19,853.0234,29,842.0234" style="stroke-width:0.5;"/><text class="f_000000_ffffff" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="228" y="858.0903">"rejected"</text><!--MD5=[66635f5546dd578ce680d81ce27cb225]
@startuml
participant "Client" as Client
participant "Observable\nGateway" as Gateway
participant "Message Broker" as MessageBus
box "Microservice" #LightBlue
participant "Handler" as Handler
end box

== Init ==

Client->>  Gateway: Send message
note right Client: ex: 'get company by id'
Gateway ->> MessageBus: Enqueue message

hnote across: "pending"

== Settled ==

alt#Gold #LightGreen Fillfill

'== Fullfill ==

MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
note over Handler: Bussiness logic here
Handler ->] : request
note right Handler: synchronous\ncall to external\nsystem 
Handler <- -] : response
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
Client<<- Gateway

hnote across: "fulfilled"

else #Pink Reject

'== Reject ==

MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
Handler ->] : request
Handler <- -] : error
Handler -> Handler: catch 
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
Client<<- Gateway

hnote across: "rejected"

end
@enduml

@startuml
participant "Client" as Client
participant "Observable\nGateway" as Gateway
participant "Message Broker" as MessageBus
box "Microservice" #LightBlue
participant "Handler" as Handler
end box

== Init ==

Client->>  Gateway: Send message
note right Client: ex: 'get company by id'
Gateway ->> MessageBus: Enqueue message

hnote across: "pending"

== Settled ==

alt#Gold #LightGreen Fillfill


MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
note over Handler: Bussiness logic here
Handler ->] : request
note right Handler: synchronous\ncall to external\nsystem 
Handler <- -] : response
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
Client<<- Gateway

hnote across: "fulfilled"

else #Pink Reject


MessageBus -> Handler: Consume message
activate Handler
Handler - -> Handler
Handler ->] : request
Handler <- -] : error
Handler -> Handler: catch 
MessageBus <- - Handler : Enqueue message
deactivate Handler
Gateway <<- MessageBus
Client<<- Gateway

hnote across: "rejected"

end
@enduml

PlantUML version 1.2022.2beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>